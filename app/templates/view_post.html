{% extends 'base.html' %}
{% import 'bootstrap/wtf.html' as wtf%}

<!-- Styles block -->
{% block styles %}
  {{ super () }}
  <link rel="stylesheet" href="{{url_for('static',filename='css/view_post.css')}}">
{% endblock %}

{% block content %}
<div class="container-xxl pt-4">
  <div class="d-flex justify-content-between">
    <h2 class="fw-bolder mb-3">{{ post.title }}</h2>
    {% if current_user.id == post.author %}
    <div>
      <a href="/delete-post/{{ post.id }}"  data-toggle="tooltip" data-placement="left" title="Delete Post"><i class="bi bi-trash3 "></i></a>
      
      <i class="bi bi-pencil-square ms-4"></i>
    </div>
  
    {% endif %}
  </div>
  
  <div>
    <img src="{{ url_for('static', filename=post.featured_img) }}" class="img-fluid" alt="">
  </div>
  <p>by {{ post.user.username | title }} ----- {{ post.date_created.strftime('%Y-%m-%d') }}</p>
  <div class="mt-3">
    {{ post.content }}
  </div>

  <!-- Display Comments -->
  <div class="py-4">
    <h3 class="mb-3">Comments</h3>
    {% for comment in comments %}
    <div class="card custom-card mb-5 px-3">
      <div class="card-body">
        <div class="d-flex justify-content-between">
          <h6 class="card-text">{{ comment.author | title }}</h6>
          {% if current_user.id == post.author %}
          <a href="/delete-comment/{{ comment.id }}"  data-toggle="tooltip" data-placement="left" title="Delete Comment"><i class="bi bi-trash3 "></i></a>
          {% endif %}
        </div>
        
        <p class="card-text">{{ comment.content }}</p>
        <small class="card-text text-muted">{{ comment.date_created.strftime('%Y-%m-%d') }}</small>
      </div>
    </div>
    {% endfor %}
  </div>

  <!-- Comment Form -->
  <div class="py-4">
    <h3 class="mb-3">Comment</h3>
    {% include 'comment_form.html' %}
  </div>

</div>
{% endblock %}